/*copyright Fiona Coulter 2011 Spiral Scripts http://www.spiralscripts.co.uk
license GNU/GPL: http://www.gnu.org/copyleft/gpl.html
*/
var l=new Class({z:function(){return{m:5,i:10,top:20,left:-100,k:!0}},A:function(d,a){this.B({m:5,i:10,top:20,left:-100,k:!0},a);this.a=$(d);this.a.e("focus",function(){this.q()}.bind(this));this.a.e("change",function(){this.u();this.j()}.bind(this));this.a.e("keyup",function(a){new Event(a);try{this.c.d("backgroundColor",this.a.value)}catch(b){}}.bind(this));this.version=(new String(MooTools.version)).substr(0,3);this.height=8*this.options.i+this.options.top;this.l=!1;this.f=new Element("div");this.a.parentNode.insertBefore(this.f,
this.a);this.f.appendChild(this.a);this.a.d("float","left");this.c=new Element("input");this.c.setAttribute("size","2");this.c.setAttribute("type","text");this.c.setAttribute("readonly","readonly");this.c.d("backgroundColor",this.a.value);this.c.d("cursor","pointer");this.c.d("float","left");this.c.e("focus",function(){this.q()}.bind(this));this.f.appendChild(this.c);this.g=new Element("span");this.g.d("float","left");this.f.appendChild(this.g);this.h=new Element("div");this.h.r({position:"relative",
"z-index":100,cursor:"pointer","background-color":"#000000","float":"left",overflow:"visible"});this.h.e("blur",function(a){new Event(a);this.j()}.bind(this));this.f.parentNode.insertBefore(this.h,this.f);this.b=new Element("table");this.b.setAttribute("border","1");this.b.setAttribute("bordercolor","silver");this.b.setAttribute("cellpadding","0");this.b.setAttribute("cellspacing","0");this.b.r({"background-color":"#000000",margin:"4px",visibility:"visible",position:"absolute",top:this.options.top+
"px",left:this.options.left+"px","z-index":100,cursor:"pointer"});var e=new Element("tbody");this.b.appendChild(e);for(var b="00 33 66 99 cc ff".split(" "),g=0;g<b.length;g++){var k=new Element("tr");e.appendChild(k);for(var h=0;h<b.length;h++)for(var j=0;j<b.length;j++){var f="#"+b[g]+b[h]+b[j],c=new Element("td");c.innerHTML='<div width="'+this.options.m+'px" height="'+this.options.i+'px" style="width:'+this.options.m+"px;height:"+this.options.i+'px;">&nbsp;</div>';c.d("backgroundColor",f);c.e("click",
function(a,b){new Event(a);this.a.value=b;this.j()}.p(this,f));c.e("mouseover",function(a,b){new Event(a);this.c.d("backgroundColor",b);this.g.innerHTML=b}.p(this,f));c.r({padding:"0px"});k.appendChild(c)}}this.o=null;this.options.k&&(this.o="1.1"==this.version?new Fx.v(this.b,"opacity",{duration:1E3}):new Fx.w(this.b,"opacity",{duration:1E3}));this.h.e("mouseout",function(a){new Event(a);try{this.c.d("backgroundColor",this.a.value)}catch(b){}this.g.innerHTML=""}.p(this,f));this.h.appendChild(this.b);
$(document).e("click",function(a){a=new Event(a);a.target!=this.a&&a.target!=this.c&&this.j()}.bind(this));this.s()},j:function(){this.b.d("visibility","hidden");this.g.innerHTML="";this.c.d("backgroundColor",this.a.value);this.options.k&&this.l&&("1.1"==this.version?this.o.start(1,0):(this.b.n("show"),this.b.n("out")));this.l=!1},q:function(){this.b.d("visibility","visible");this.options.k&&("1.1"==this.version?this.o.start(0,1):(this.b.n("hide"),this.b.n("in")));this.l=!0},s:function(){this.b.d("visibility",
"hidden");this.g.innerHTML="";this.c.d("backgroundColor",this.a.value)},u:function(){var d=/#[0-9A-Fa-f]{6}/;if(!d.test(this.a.value)){var a=new String(this.a.value);"#"!=a.charAt(0)&&(a="#"+a);for(var a=a.replace(/[^#A-Fa-f0-9]/g,""),e=7-a.length,b=0;b<e;b++)a+="0";a=a.substr(0,7);d.test(a)||(a="#ffffff");this.a.value=a}}});l.t(new Events);l.t(new Options);